# Журнал изменений

## 3.1 от 25 августа 2025 года

### Добавлено
- Статус работника (Работает / Уволен) в базе данных и интерфейсе
- Подсветка уволенных работников красным в списке
- Блокировка добавления уволенных работников в новые наряды
- Импорт работников из Excel с поддержкой колонки «Статус»
- Экспорт работников в Excel с колонкой «Статус» и сортировкой: статус → цех → должность (начальники первыми) → ФИО
- Отчеты: единый режим «один работник» — шапка с ФИО (Фамилия И.О.) и цехом, подписи; скрытие колонок «Работник» и «Цех» в таблице

### Исправлено
- PDF экспорт: устранена ошибка с использованием переменной вне области видимости при вычислении ширин
- Отчеты: корректное определение работника и отдела в контексте для шапок/подписей

---

## [3 сетевая от 18 августа 2025 года] - 2025-01-18

### Добавлено
- Новый формат версионирования "3 сетевая от [дата]"
- Русские названия месяцев в версии
- Автоматическое обновление даты при изменениях в коде
- **Кнопка "Просмотр изменений" в разделе "Настройки"**
  - Отображает историю изменений программы в удобном формате
  - Показывает даты и краткие описания изменений, исправлений
  - Возможность копирования в буфер обмена
  - Структурированный список по версиям с эмодзи-индикаторами

### Изменено
- Версионирование переведено на формат "3 сетевая от [дата]"
- Основная ветка разработки перенесена в v3

### Исправлено
- Подготовка к стабилизации версии 2
- **КРИТИЧЕСКОЕ ИСПРАВЛЕНИЕ**: Проблема с добавлением нескольких работников в наряды
  - Улучшена валидация работников в форме создания/редактирования нарядов
  - Добавлена автоматическая обработка дублирующихся ID работников
  - Улучшена обработка ошибок с подробным логированием
  - Добавлены проверки корректности ID работников
  - Исправлена проблема "Найдены некорректные работники в составе бригады"

---

## [2.9.X.X] - 2025-XX-XX

### Добавлено
- Система ролей пользователей (Полный доступ / Только просмотр)
- Режим "только чтение" с защитой на уровне БД
- Диалог выбора режима при запуске
- Настройки размера шрифта UI с живым применением
- Кнопка "Печать" для отчетов
- Оптимизация PDF отчетов (авто-ориентация, умное масштабирование шрифтов)
- Нормализация заголовков колонок во всех отчетах
- Улучшенная компоновка в разделе "Наряды"
- Перенос функционала "Импорт/Экспорт" в "Настройки"
- Кнопка "Собрать .exe" с окном логов в реальном времени
- Система версионирования 2.Y.M.N на основе изменений файлов
- Автоматическое скрытие подсказок через 5 секунд
- Подсказки появляются сразу при фокусе на поле
- Точное позиционирование подсказок автодополнения
- История использования для автодополнения
- Календарь для выбора дат во всех полях
- Кнопки "Отмена" во всех режимах редактирования
- Загрузка, редактирование и удаление существующих нарядов
- Раздел "Отчеты" с фильтрами и экспортом (HTML, PDF, Excel)
- Импорт/экспорт Excel для справочных данных
- Поиск без учета регистра в базе данных
- Слияние баз данных
- Создание резервных копий БД

### Изменено
- Улучшен интерфейс создания/редактирования нарядов
- Оптимизирована компоновка форм для лучшей адаптивности
- Улучшена система автодополнения и подсказок
- Переработана система отчетов без предварительного просмотра
- Улучшена обработка PDF экспорта

### Исправлено
- Проблемы с шрифтами в PDF (поддержка кириллицы)
- Переполнение текста в отчетах
- Позиционирование элементов интерфейса
- Валидация внешних ключей при создании нарядов
- Проблемы с календарем (блокировка интерфейса)
- Автоматическое скрытие подсказок

---

## [2.0.0.0] - 2025-XX-XX

### Добавлено
- Базовая функциональность учета сдельной работы
- GUI на CustomTkinter
- SQLite база данных
- Система отчетов
- Экспорт в различные форматы
